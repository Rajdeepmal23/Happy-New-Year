<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>New Year Surprise üéÜ</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;500&display=swap" rel="stylesheet">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Segoe UI',sans-serif;
}
body{
  background:black;
  overflow:hidden;
  color:white;
}

/* ================= START SCREEN ================= */
#startScreen{
  position:fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:radial-gradient(circle at top,#0b0b1f,#000);
  z-index:10;
  text-align:center;
  padding:20px;
}

#startScreen h1{
  font-size:2rem;
  margin-bottom:10px;
  color:#ff5ca8;
}

#startScreen p{
  color:#aaa;
  margin-bottom:15px;
  font-size:1rem;
}

#nameInput{
  padding:14px 18px;
  width:100%;
  max-width:300px;
  border-radius:30px;
  border:none;
  outline:none;
  font-size:1rem;
  text-align:center;
}

#startBtn{
  margin-top:15px;
  padding:14px 35px;
  border:none;
  border-radius:30px;
  background:#ff0066;
  color:white;
  font-size:1rem;
  cursor:pointer;
  transition:0.3s;
}

#startBtn:hover{
  transform:scale(1.05);
  background:#ff3385;
}

#creator{
  position:absolute;
  bottom:12px;
  font-size:0.8rem;
  color:#666;
}

/* ================= WISH BOX ================= */
#wishBox{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
  font-size:2.4rem;
  z-index:2;
  white-space:pre-line;
  display:none;
  padding:10px;

  font-family: 'Great Vibes', cursive; /* NEW FRONT */
  color: #ffd6ff;
  text-shadow:
    0 0 10px #ff5cf4,
    0 0 25px #ff8df7,
    0 0 40px #ffb3ff;
}


/* ================= CANVAS ================= */
canvas{
  position:fixed;
  inset:0;
  z-index:1;
}

/* ================= STARS & EFFECTS ================= */
.star{
  position:fixed;
  width:2px;
  height:2px;
  background:white;
  border-radius:50%;
  opacity:0.8;
}

.meteor{
  position:fixed;
  width:2px;
  height:2px;
  background:white;
  border-radius:50%;
}

.confetti{
  position:fixed;
  width:6px;
  height:6px;
  background:linear-gradient(45deg,#ff0,#f0f);
}

/* ================= MOBILE RESPONSIVE ================= */
@media (max-width:600px){
  #wishBox{
    font-size:1.5rem;
  }
  #startScreen h1{
    font-size:1.6rem;
  }
}
</style>
</head>

<body>

<!-- START SCREEN -->
<div id="startScreen">
  <h1>Please Enter Your Name üéá</h1>
  <p>Press your screen to start fireworks</p>
  <input id="nameInput" placeholder="Enter Your Name..." />
  <button id="startBtn">Start Surprise üéÜ</button>
  <div id="creator">Created by Rajdeep ‚ù§Ô∏è</div>
</div>

<!-- WISH -->
<div id="wishBox"></div>

<!-- CANVAS -->
<canvas id="fireworks"></canvas>

<!-- MUSIC -->
<audio id="music" src="sound.mp3" loop></audio>

<script>
/* ================= START ================= */
const startBtn=document.getElementById("startBtn");
const input=document.getElementById("nameInput");
const startScreen=document.getElementById("startScreen");
const wishBox=document.getElementById("wishBox");
const music=document.getElementById("music");
let herName="";

startBtn.onclick=()=>{
  herName=input.value.trim();
  if(!herName){alert("Please enter your name ‚ù§Ô∏è");return;}
  startScreen.style.display="none";
  wishBox.style.display="block";
  typingEffect(`üíñDear ${herName},\n\nHappy New Year 2026 üéÜ\n\nMay your life shines brighter\n and lot of happiness‚ú®\n\nWith best wishes,
Rajdeep ‚ú® `);
  music.play();
  setTimeout(()=>textFirework("2026"),3500);
  setTimeout(()=>heartText(herName),7000);
};

/* ================= TYPING EFFECT ================= */
function typingEffect(text){
  wishBox.innerHTML="";
  let i=0;
  let t=setInterval(()=>{
    wishBox.innerHTML+=text[i]=="\n"?"<br>":text[i];
    i++;
    if(i>=text.length) clearInterval(t);
  },40);
}

/* ================= STARS ================= */
for(let i=0;i<120;i++){
  let s=document.createElement("div");
  s.className="star";
  s.style.top=Math.random()*100+"vh";
  s.style.left=Math.random()*100+"vw";
  document.body.appendChild(s);
}

/* ================= CANVAS ================= */
const canvas=document.getElementById("fireworks");
const ctx=canvas.getContext("2d");
const off=document.createElement("canvas");
const offCtx=off.getContext("2d");

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
  off.width=canvas.width;
  off.height=canvas.height;
}
resize();
addEventListener("resize",resize);

let rockets=[],particles=[];
const MAX_PARTICLES=4000;

/* ================= PARTICLES ================= */
class Particle{
  constructor(x,y,vx,vy,r,c){
    this.x=x;this.y=y;this.vx=vx;this.vy=vy;this.life=1;this.r=r;this.c=c;
  }
  update(){
    this.x+=this.vx;
    this.y+=this.vy;
    this.vy+=0.03;
    this.life-=0.012;
    ctx.fillStyle=`hsla(${this.c},100%,60%,${this.life})`;
    ctx.beginPath();
    ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
    ctx.fill();
    return this.life<=0;
  }
}

/* ================= ROCKET ================= */
class Rocket{
  constructor(x){
    this.x=x;
    this.y=canvas.height;
    this.vy=-7-Math.random()*2;
    this.target=Math.random()*canvas.height*0.4+120;
    this.c=Math.random()*360;
  }
  update(){
    this.y+=this.vy;
    ctx.fillStyle=`hsl(${this.c},100%,60%)`;
    ctx.beginPath();
    ctx.arc(this.x,this.y,3,0,Math.PI*2);
    ctx.fill();
    if(this.y<=this.target){
      explode(this.x,this.y,this.c);
      return true;
    }
    return false;
  }
}

/* ================= EXPLOSION ================= */
function explode(x,y,c){
  if(particles.length>MAX_PARTICLES) return;
  for(let i=0;i<120;i++){
    let a=Math.random()*Math.PI*2;
    let s=Math.random()*5+2;
    particles.push(new Particle(x,y,Math.cos(a)*s,Math.sin(a)*s,2,c));
  }
}

/* ================= HEART ================= */
function heartFirework(x,y){
  for(let t=0;t<Math.PI*2;t+=0.22){
    let hx=16*Math.pow(Math.sin(t),3);
    let hy=-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));
    particles.push(new Particle(x,y,hx*0.18,hy*0.18,2,330));
  }
}

/* ================= HEART TEXT ================= */
function heartText(name){
  offCtx.clearRect(0,0,off.width,off.height);
  offCtx.font="bold 120px Arial";
  offCtx.textAlign="center";
  offCtx.fillStyle="white";
  offCtx.fillText(name,off.width/2,off.height/2);
  let img=offCtx.getImageData(0,0,off.width,off.height);
  let pts=[];
  for(let y=0;y<img.height;y+=8){
    for(let x=0;x<img.width;x+=8){
      if(img.data[(y*img.width+x)*4+3]>150) pts.push({x,y});
    }
  }
  let i=0;
  let it=setInterval(()=>{
    if(i>=pts.length){clearInterval(it);return;}
    heartFirework(pts[i].x,pts[i].y);
    i+=15;
  },40);
}

/* ================= CLICK ================= */
addEventListener("click",e=>{
  rockets.push(new Rocket(e.clientX));
  heartFirework(e.clientX,e.clientY);
});

/* ================= MUSIC SYNC ================= */
const audioCtx=new AudioContext();
const analyser=audioCtx.createAnalyser();
const src=audioCtx.createMediaElementSource(music);
src.connect(analyser);
analyser.connect(audioCtx.destination);
analyser.fftSize=256;
const data=new Uint8Array(analyser.frequencyBinCount);
let last=0;
music.onplay=()=>audioCtx.resume();

/* ================= ANIMATE ================= */
function animate(){
  ctx.fillStyle="rgba(0,0,0,0.18)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  rockets=rockets.filter(r=>!r.update());
  particles=particles.filter(p=>!p.update());
  analyser.getByteFrequencyData(data);
  let beat=data.reduce((a,b)=>a+b)/data.length;
  if(beat>150 && Date.now()-last>400){
    rockets.push(new Rocket(Math.random()*canvas.width));
    last=Date.now();
  }
  requestAnimationFrame(animate);
}
animate();

/* ================= AUTO ================= */
setInterval(()=>rockets.push(new Rocket(Math.random()*canvas.width)),1200);

function textFirework(txt){
  let cx=canvas.width/2;
  let cy=canvas.height/2;
  for(let i=0;i<txt.length;i++){
    setTimeout(()=>heartFirework(cx+i*20,cy),i*150);
  }
}
</script>
</body>
</html>
